{
  "info": {
    "name": "Agranelos BFF - API Completa + Gesti√≥n Mejorada üÜï",
    "description": "Colecci√≥n Postman para todos los endpoints del BFF de Agranelos (Productos, Bodegas, Inventarios y GraphQL).\n\n## üÜï Nuevas Funcionalidades (Octubre 2025)\n- **üîç Consulta de productos en bodega**: `GET /api/bodegas/{id}/productos`\n- **üì¶ Asignaci√≥n de productos a bodegas**: `POST /api/bodegas/{id}/productos`\n- **üóëÔ∏è Remoci√≥n de productos de bodegas**: `DELETE /api/bodegas/{id}/productos/{productoId}`\n- **üîí Eliminaci√≥n segura con validaci√≥n**: `DELETE /api/bodegas/{id}` (validaci√≥n autom√°tica)\n- **‚ö° Eliminaci√≥n forzada con detalles**: `DELETE /api/bodegas/{id}?force=true`\n- **üìä Respuestas enriquecidas**: Informaci√≥n detallada de productos afectados\n\n## Entornos Disponibles\nEsta colecci√≥n incluye 4 archivos de entorno en la carpeta `postman/`:\n- **Local**: http://localhost:8080 (desarrollo local)\n- **Docker/Podman**: http://localhost:8080 (contenedor local)\n- **AWS**: https://your-bff-domain.amazonaws.com (producci√≥n AWS)\n- **Azure**: https://your-bff-app.azurewebsites.net (producci√≥n Azure)\n\n## C√≥mo usar\n1. Importa la colecci√≥n en Postman\n2. Importa el entorno que desees usar desde `postman/`\n3. Selecciona el entorno en el dropdown de Postman\n4. ¬°Listo para probar!\n\n## Variables\n- `base_url`: URL base del BFF\n- `producto_id`: ID de producto para pruebas\n- `bodega_id`: ID de bodega para pruebas\n- `username`: Usuario para autenticaci√≥n HTTP Basic\n- `password`: Contrase√±a para autenticaci√≥n HTTP Basic\n\n## Gesti√≥n de Inventarios (Productos en Bodegas)\n### Flujo Completo:\n1. **Crear producto**: `POST /api/productos`\n2. **Crear bodega**: `POST /api/bodegas`\n3. **Asignar producto a bodega**: `POST /api/bodegas/{id}/productos`\n4. **Consultar productos en bodega**: `GET /api/bodegas/{id}/productos`\n5. **Actualizar cantidad** (reasignar): `POST /api/bodegas/{id}/productos`\n6. **Remover producto**: `DELETE /api/bodegas/{id}/productos/{productoId}`\n\n## Gesti√≥n de Bodegas Mejorada\n### Flujo de Eliminaci√≥n:\n1. **Consultar productos**: `GET /api/bodegas/{id}/productos`\n2. **Eliminaci√≥n segura**: `DELETE /api/bodegas/{id}` (valida autom√°ticamente)\n3. **Si hay conflicto**: Usar `force=true` o reasignar productos\n4. **Eliminaci√≥n forzada**: `DELETE /api/bodegas/{id}?force=true`\n\n## Autenticaci√≥n\nTodos los endpoints requieren autenticaci√≥n HTTP Basic configurada a nivel de colecci√≥n.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "basic",
    "basic": [
      {
        "key": "username",
        "value": "{{username}}",
        "type": "string"
      },
      {
        "key": "password",
        "value": "{{password}}",
        "type": "string"
      }
    ]
  },
  "item": [
    {
      "name": "Productos",
      "item": [
        {
          "name": "Listar todos los productos",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/productos",
              "host": ["{{base_url}}"],
              "path": ["api", "productos"]
            }
          }
        },
        {
          "name": "Obtener producto por ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/productos/{{producto_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "productos", "{{producto_id}}"]
            }
          }
        },
        {
          "name": "Crear nuevo producto",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"Producto ejemplo\",\n  \"descripcion\": \"Descripci√≥n del producto de ejemplo\",\n  \"precio\": 99.99,\n  \"cantidadEnStock\": 25\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/productos",
              "host": ["{{base_url}}"],
              "path": ["api", "productos"]
            }
          }
        },
        {
          "name": "Actualizar producto existente",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"Producto actualizado\",\n  \"descripcion\": \"Nueva descripci√≥n del producto actualizado\",\n  \"precio\": 149.99,\n  \"cantidadEnStock\": 15\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/productos/{{producto_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "productos", "{{producto_id}}"]
            }
          }
        },
        {
          "name": "Eliminar producto",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/productos/{{producto_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "productos", "{{producto_id}}"]
            }
          }
        }
      ]
    },
    {
      "name": "Bodegas",
      "item": [
        {
          "name": "Listar todas las bodegas",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/bodegas",
              "host": ["{{base_url}}"],
              "path": ["api", "bodegas"]
            }
          }
        },
        {
          "name": "Obtener bodega por ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/bodegas/{{bodega_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "bodegas", "{{bodega_id}}"]
            }
          }
        },
        {
          "name": "Crear nueva bodega",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"Bodega Central\",\n  \"ubicacion\": \"Av. Principal 123, Ciudad\",\n  \"capacidad\": 5000\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/bodegas",
              "host": ["{{base_url}}"],
              "path": ["api", "bodegas"]
            }
          }
        },
        {
          "name": "Actualizar bodega existente",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"Bodega Central Actualizada\",\n  \"ubicacion\": \"Av. Principal 123, Ciudad (Nueva ubicaci√≥n)\",\n  \"capacidad\": 7500\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/bodegas/{{bodega_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "bodegas", "{{bodega_id}}"]
            }
          }
        },
        {
          "name": "üÜï Consultar productos en bodega",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/bodegas/{{bodega_id}}/productos",
              "host": ["{{base_url}}"],
              "path": ["api", "bodegas", "{{bodega_id}}", "productos"]
            },
            "description": "üÜï NUEVA FUNCIONALIDAD: Consulta todos los productos asignados a una bodega espec√≠fica. √ötil para verificar qu√© productos se ver√°n afectados antes de eliminar una bodega."
          },
          "response": [
            {
              "name": "Ejemplo - Bodega con productos",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/bodegas/1/productos",
                  "host": ["{{base_url}}"],
                  "path": ["api", "bodegas", "1", "productos"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "[\n  {\n    \"id\": 1,\n    \"nombre\": \"Arroz Premium\",\n    \"cantidad\": 150,\n    \"precio\": 25.50\n  },\n  {\n    \"id\": 3,\n    \"nombre\": \"Az√∫car Refinada\",\n    \"cantidad\": 200,\n    \"precio\": 20.00\n  }\n]"
            }
          ]
        },
        {
          "name": "üîÑ Eliminar bodega (validaci√≥n autom√°tica)",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/bodegas/{{bodega_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "bodegas", "{{bodega_id}}"]
            },
            "description": "üîÑ FUNCIONALIDAD MEJORADA: Eliminaci√≥n segura con validaci√≥n autom√°tica. Si la bodega contiene productos, retornar√° error 409 Conflict con detalles de los productos afectados."
          },
          "response": [
            {
              "name": "Ejemplo - Bodega con productos (409 Conflict)",
              "originalRequest": {
                "method": "DELETE",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/bodegas/5",
                  "host": ["{{base_url}}"],
                  "path": ["api", "bodegas", "5"]
                }
              },
              "status": "Conflict",
              "code": 409,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"error\": \"La bodega contiene productos\",\n  \"mensaje\": \"Use el par√°metro 'force=true' para eliminar la bodega y sus productos, o reasigne los productos primero\",\n  \"productos\": [\n    {\n      \"id\": 1,\n      \"nombre\": \"Arroz Premium\",\n      \"cantidad\": 150,\n      \"precio\": 25.50\n    },\n    {\n      \"id\": 3,\n      \"nombre\": \"Az√∫car Refinada\",\n      \"cantidad\": 200,\n      \"precio\": 20.00\n    }\n  ],\n  \"bodegaId\": \"5\"\n}"
            },
            {
              "name": "Ejemplo - Bodega vac√≠a (200 OK)",
              "originalRequest": {
                "method": "DELETE",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/bodegas/10",
                  "host": ["{{base_url}}"],
                  "path": ["api", "bodegas", "10"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"mensaje\": \"Bodega eliminada exitosamente\",\n  \"bodegaId\": \"10\",\n  \"productosAfectados\": 0\n}"
            }
          ]
        },
        {
          "name": "üÜï Eliminar bodega (forzado con detalles)",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/bodegas/{{bodega_id}}?force=true",
              "host": ["{{base_url}}"],
              "path": ["api", "bodegas", "{{bodega_id}}"],
              "query": [
                {
                  "key": "force",
                  "value": "true",
                  "description": "Fuerza la eliminaci√≥n sin validaciones previas"
                }
              ]
            },
            "description": "üÜï NUEVA FUNCIONALIDAD: Eliminaci√≥n forzada que bypasea las validaciones y proporciona informaci√≥n detallada sobre los productos afectados en la respuesta."
          },
          "response": [
            {
              "name": "Ejemplo - Eliminaci√≥n forzada exitosa",
              "originalRequest": {
                "method": "DELETE",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/bodegas/5?force=true",
                  "host": ["{{base_url}}"],
                  "path": ["api", "bodegas", "5"],
                  "query": [
                    {
                      "key": "force",
                      "value": "true"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"mensaje\": \"Bodega eliminada exitosamente\",\n  \"bodegaId\": \"5\",\n  \"productosAfectados\": 2,\n  \"detalleProductos\": [\n    {\n      \"id\": 1,\n      \"nombre\": \"Arroz Premium\",\n      \"cantidad\": 150,\n      \"precio\": 25.50\n    },\n    {\n      \"id\": 3,\n      \"nombre\": \"Az√∫car Refinada\",\n      \"cantidad\": 200,\n      \"precio\": 20.00\n    }\n  ],\n  \"advertencia\": \"Los productos han perdido su asignaci√≥n a esta bodega\"\n}"
            }
          ]
        },
        {
          "name": "üÜï Asignar producto a bodega",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"productoId\": 1,\n  \"cantidad\": 50\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/bodegas/{{bodega_id}}/productos",
              "host": ["{{base_url}}"],
              "path": ["api", "bodegas", "{{bodega_id}}", "productos"]
            },
            "description": "üÜï NUEVA FUNCIONALIDAD: Asigna un producto existente a una bodega con una cantidad espec√≠fica. Si el producto ya est√° asignado, actualiza la cantidad."
          },
          "response": [
            {
              "name": "Ejemplo - Asignaci√≥n exitosa",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"productoId\": 1,\n  \"cantidad\": 50\n}"
                },
                "url": {
                  "raw": "{{base_url}}/api/bodegas/2/productos",
                  "host": ["{{base_url}}"],
                  "path": ["api", "bodegas", "2", "productos"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"mensaje\": \"Producto asignado a bodega exitosamente\",\n  \"productoId\": 1,\n  \"bodegaId\": 2,\n  \"cantidad\": 50\n}"
            }
          ]
        },
        {
          "name": "üÜï Remover producto de bodega",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/bodegas/{{bodega_id}}/productos/{{producto_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "bodegas", "{{bodega_id}}", "productos", "{{producto_id}}"]
            },
            "description": "üÜï NUEVA FUNCIONALIDAD: Remueve completamente un producto de una bodega espec√≠fica, eliminando su asignaci√≥n del inventario."
          },
          "response": [
            {
              "name": "Ejemplo - Remoci√≥n exitosa",
              "originalRequest": {
                "method": "DELETE",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/bodegas/2/productos/1",
                  "host": ["{{base_url}}"],
                  "path": ["api", "bodegas", "2", "productos", "1"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"mensaje\": \"Producto removido de bodega exitosamente\",\n  \"productoId\": 1,\n  \"bodegaId\": 2\n}"
            }
          ]
        }
      ]
    },
    {
      "name": "GraphQL",
      "item": [
        {
          "name": "Info del endpoint GraphQL",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/graphql",
              "host": ["{{base_url}}"],
              "path": ["api", "graphql"]
            }
          }
        },
        {
          "name": "Health Check",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"{ health }\",\n  \"variables\": {},\n  \"operationName\": null\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/graphql",
              "host": ["{{base_url}}"],
              "path": ["api", "graphql"]
            }
          }
        },
        {
          "name": "Query - Listar todos los productos",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"{ productos { id nombre descripcion precio cantidad fechaCreacion fechaActualizacion } }\",\n  \"variables\": {},\n  \"operationName\": null\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/graphql",
              "host": ["{{base_url}}"],
              "path": ["api", "graphql"]
            }
          }
        },
        {
          "name": "Query - Producto por ID (con variables)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"query GetProducto($id: ID!) { producto(id: $id) { id nombre descripcion precio cantidad fechaCreacion fechaActualizacion } }\",\n  \"variables\": {\n    \"id\": \"{{producto_id}}\"\n  },\n  \"operationName\": \"GetProducto\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/graphql",
              "host": ["{{base_url}}"],
              "path": ["api", "graphql"]
            }
          }
        },
        {
          "name": "Query - Productos (solo campos b√°sicos)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"{ productos { id nombre precio } }\",\n  \"variables\": {},\n  \"operationName\": null\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/graphql",
              "host": ["{{base_url}}"],
              "path": ["api", "graphql"]
            }
          }
        },
        {
          "name": "Query - Listar todas las bodegas",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"{ bodegas { id nombre ubicacion capacidad fechaCreacion fechaActualizacion } }\",\n  \"variables\": {},\n  \"operationName\": null\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/graphql",
              "host": ["{{base_url}}"],
              "path": ["api", "graphql"]
            }
          }
        },
        {
          "name": "Query - Bodega por ID (con variables)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"query GetBodega($id: ID!) { bodega(id: $id) { id nombre ubicacion capacidad fechaCreacion fechaActualizacion } }\",\n  \"variables\": {\n    \"id\": \"{{bodega_id}}\"\n  },\n  \"operationName\": \"GetBodega\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/graphql",
              "host": ["{{base_url}}"],
              "path": ["api", "graphql"]
            }
          }
        },
        {
          "name": "Query - Consulta m√∫ltiple (productos y bodegas)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"{ productos { id nombre precio } bodegas { id nombre ubicacion } }\",\n  \"variables\": {},\n  \"operationName\": null\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/graphql",
              "host": ["{{base_url}}"],
              "path": ["api", "graphql"]
            }
          }
        },
        {
          "name": "Mutation - Crear producto",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"mutation CrearProducto($input: ProductoInput!) { crearProducto(input: $input) { success message producto { id nombre precio cantidad } error } }\",\n  \"variables\": {\n    \"input\": {\n      \"nombre\": \"Producto GraphQL Test\",\n      \"descripcion\": \"Creado via mutation GraphQL\",\n      \"precio\": 99.99,\n      \"cantidad\": 50\n    }\n  },\n  \"operationName\": \"CrearProducto\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/graphql",
              "host": ["{{base_url}}"],
              "path": ["api", "graphql"]
            }
          }
        },
        {
          "name": "Mutation - Actualizar producto",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"mutation ActualizarProducto($input: ProductoUpdateInput!) { actualizarProducto(input: $input) { success message producto { id nombre precio cantidad } error } }\",\n  \"variables\": {\n    \"input\": {\n      \"id\": \"{{producto_id}}\",\n      \"nombre\": \"Producto Actualizado via GraphQL\",\n      \"precio\": 149.99,\n      \"cantidad\": 75\n    }\n  },\n  \"operationName\": \"ActualizarProducto\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/graphql",
              "host": ["{{base_url}}"],
              "path": ["api", "graphql"]
            }
          }
        },
        {
          "name": "Mutation - Eliminar producto",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"mutation EliminarProducto($id: ID!) { eliminarProducto(id: $id) { success message error } }\",\n  \"variables\": {\n    \"id\": \"{{producto_id}}\"\n  },\n  \"operationName\": \"EliminarProducto\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/graphql",
              "host": ["{{base_url}}"],
              "path": ["api", "graphql"]
            }
          }
        },
        {
          "name": "Mutation - Crear bodega",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"mutation CrearBodega($input: BodegaInput!) { crearBodega(input: $input) { success message bodega { id nombre ubicacion capacidad } error } }\",\n  \"variables\": {\n    \"input\": {\n      \"nombre\": \"Bodega GraphQL Test\",\n      \"ubicacion\": \"Calle Test 123\",\n      \"capacidad\": 3000\n    }\n  },\n  \"operationName\": \"CrearBodega\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/graphql",
              "host": ["{{base_url}}"],
              "path": ["api", "graphql"]
            }
          }
        },
        {
          "name": "Mutation - Actualizar bodega",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"mutation ActualizarBodega($input: BodegaUpdateInput!) { actualizarBodega(input: $input) { success message bodega { id nombre ubicacion capacidad } error } }\",\n  \"variables\": {\n    \"input\": {\n      \"id\": \"{{bodega_id}}\",\n      \"nombre\": \"Bodega Actualizada via GraphQL\",\n      \"ubicacion\": \"Nueva Ubicaci√≥n 456\",\n      \"capacidad\": 5000\n    }\n  },\n  \"operationName\": \"ActualizarBodega\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/graphql",
              "host": ["{{base_url}}"],
              "path": ["api", "graphql"]
            }
          }
        },
        {
          "name": "Mutation - Eliminar bodega",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"mutation EliminarBodega($id: ID!) { eliminarBodega(id: $id) { success message error } }\",\n  \"variables\": {\n    \"id\": \"{{bodega_id}}\"\n  },\n  \"operationName\": \"EliminarBodega\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/graphql",
              "host": ["{{base_url}}"],
              "path": ["api", "graphql"]
            }
          }
        }
      ]
    },
    {
      "name": "üÜï Flujos de Trabajo - Gesti√≥n de Bodegas",
      "description": "Ejemplos de flujos completos para la gesti√≥n mejorada de bodegas con las nuevas funcionalidades implementadas.",
      "item": [
        {
          "name": "üîç Flujo A: Consulta Previa y Eliminaci√≥n Segura",
          "description": "Ejemplo de flujo completo: consulta productos ‚Üí intenta eliminaci√≥n segura ‚Üí maneja conflictos",
          "item": [
            {
              "name": "1Ô∏è‚É£ Consultar productos en bodega",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/bodegas/{{bodega_id}}/productos",
                  "host": ["{{base_url}}"],
                  "path": ["api", "bodegas", "{{bodega_id}}", "productos"]
                },
                "description": "Paso 1: Verificar qu√© productos est√°n en la bodega antes de eliminarla"
              }
            },
            {
              "name": "2Ô∏è‚É£ Intentar eliminaci√≥n segura",
              "request": {
                "method": "DELETE",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/bodegas/{{bodega_id}}",
                  "host": ["{{base_url}}"],
                  "path": ["api", "bodegas", "{{bodega_id}}"]
                },
                "description": "Paso 2: Intentar eliminaci√≥n normal (con validaci√≥n autom√°tica)"
              }
            },
            {
              "name": "3Ô∏è‚É£ Eliminaci√≥n forzada (si es necesario)",
              "request": {
                "method": "DELETE",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/bodegas/{{bodega_id}}?force=true",
                  "host": ["{{base_url}}"],
                  "path": ["api", "bodegas", "{{bodega_id}}"],
                  "query": [
                    {
                      "key": "force",
                      "value": "true",
                      "description": "Usar solo si el paso 2 devolvi√≥ 409 Conflict"
                    }
                  ]
                },
                "description": "Paso 3: Si el paso anterior devolvi√≥ 409 Conflict, usar eliminaci√≥n forzada"
              }
            }
          ]
        },
        {
          "name": "‚ö° Flujo B: Eliminaci√≥n Directa con Detalles",
          "description": "Para casos donde se necesita eliminaci√≥n inmediata con informaci√≥n completa de impacto",
          "item": [
            {
              "name": "üóëÔ∏è Eliminaci√≥n forzada directa",
              "request": {
                "method": "DELETE",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/bodegas/{{bodega_id}}?force=true",
                  "host": ["{{base_url}}"],
                  "path": ["api", "bodegas", "{{bodega_id}}"],
                  "query": [
                    {
                      "key": "force",
                      "value": "true",
                      "description": "Eliminaci√≥n directa sin validaciones previas"
                    }
                  ]
                },
                "description": "Eliminaci√≥n directa que devuelve informaci√≥n completa de productos afectados"
              }
            }
          ]
        },
        {
          "name": "üîÑ Flujo C: Auditor√≠a de Bodegas",
          "description": "Para auditar m√∫ltiples bodegas y conocer su contenido antes de operaciones masivas",
          "item": [
            {
              "name": "üìã Listar todas las bodegas",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/bodegas",
                  "host": ["{{base_url}}"],
                  "path": ["api", "bodegas"]
                },
                "description": "Obtener lista completa de bodegas para auditor√≠a"
              }
            },
            {
              "name": "üîç Verificar productos en cada bodega",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/bodegas/{{bodega_id}}/productos",
                  "host": ["{{base_url}}"],
                  "path": ["api", "bodegas", "{{bodega_id}}", "productos"]
                },
                "description": "Verificar contenido de cada bodega (cambiar bodega_id para diferentes bodegas)"
              }
            },
            {
              "name": "‚ö†Ô∏è Simular eliminaci√≥n (sin force)",
              "request": {
                "method": "DELETE",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/bodegas/{{bodega_id}}",
                  "host": ["{{base_url}}"],
                  "path": ["api", "bodegas", "{{bodega_id}}"]
                },
                "description": "Simular eliminaci√≥n para ver qu√© productos se ver√≠an afectados (recibir√° 409 si hay productos)"
              }
            }
          ]
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8080",
      "description": "URL base del BFF de Agranelos"
    },
    {
      "key": "producto_id",
      "value": "1",
      "description": "ID de producto para pruebas (cambiar seg√∫n necesidad)"
    },
    {
      "key": "bodega_id",
      "value": "1",
      "description": "ID de bodega para pruebas (cambiar seg√∫n necesidad)"
    },
    {
      "key": "bodega_test_id",
      "value": "5",
      "description": "üÜï ID de bodega para pruebas de eliminaci√≥n (usar una que contenga productos)"
    },
    {
      "key": "username",
      "value": "user",
      "description": "Usuario para autenticaci√≥n HTTP Basic"
    },
    {
      "key": "password",
      "value": "myStrongPassword123",
      "description": "Contrase√±a para autenticaci√≥n HTTP Basic"
    }
  ]
}
